<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chessboard</title>
    <style>
        .centered-text {
            text-align: center;
        }
    </style>
    <style>
        .container {
            background-color: rgb(52, 52, 52);
            display: flex;
            align-items: center;
            width: 100%;
            height: 100%;
            text-align: center;
            color:aliceblue;
        }
    </style>
    
</head>
<body class="container"></body>
    match_id <input type="text" id="matchId" name="matchId"> </br>
    <button onclick="getData()">Go!</button>

        <script>
            function getData(){
                var matchId = document.getElementById("matchId").value;

                renderMap(matchId);
            }

            function renderMap(matchId){
                var xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function() {
                    if (this.readyState == 4 && this.status == 200) {
                        // Typical action to be performed when the document is ready:
                        response = JSON.parse(xhttp.responseText);

                        let output = '';

                        for (let i = 0; i < response.length; i++) {
                            output += '---------------------------------------\n|';
                            for (let j = 0; j < response[i].length; j++) {
                                if(response[i][j] == 'P'){
                                    response[i][j] = "ðŸ¦§";
                                }else if(response[i][j] == 'K'){
                                    response[i][j] = "ðŸ¦€";
                                }else{
                                    if((i+j)%2 == 0){
                                        response[i][j] = "â¬œ";
                                    }else{
                                        response[i][j] = "â¬›";
                                    }
                                }

                                output += response[i][j] + '|';
                        }
                            output += '\n';
                        }
                        output += '---------------------------------------';
                        console.log(output);

                        //style="background-color: rgb(52, 52, 52); text-align: center; color:aliceblue; vertical-align: middle;"

                        // var mapPrint = "";
                        // var lastY = 1;
        
                        // //this for loop logs every single tile
                        // for (var i = 0; i < response.length; i++) {
        
                        //     var currentX = response[i].tile_x_coordinates;
                        //     var currentY = response[i].tile_y_coordinates;
        
                        //     if (lastY !== currentY){
                        //         lastY = currentY;
                        //         mapPrint += "\n";
                        //     }
        
                        //     var tileType = response[i].tiletype.split(" "); // Se alguma vez aparecer um tile com um espaÃ§o vai partir isto tudo :(
                        //     var tileTypeKey = tileType[1];
                        //     var tileTypeKey = tileTypeKey.replace("(", "");
                        //     var tileTypeKey = tileTypeKey.replace(")", "");
        
                        //     if (tileTypeKey == 3)
                        //         tileTypeKey = "â¬›";
                        //     else if (tileTypeKey == 2)
                        //         tileTypeKey = "ðŸŸ¦";
                        //     else if (tileTypeKey == 1)
                        //         tileTypeKey = "â¬œ";
        
                        //     mapPrint += tileTypeKey;
                        // }
                        // console.log(mapPrint);
                        document.getElementById("superbChessboard").innerText = output;
                    }
                };
                xhttp.open("GET", "/getGameState1/" + matchId, true);
                xhttp.send()
            }
            </script>
        <div id="superbChessboard"></div>
</body>
</html>